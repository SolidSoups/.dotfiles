./lua/config/lazy.lua
-- Bootstrap lazy.nvim
local lazypath = vim.fn.stdpath("data") .. "/lazy/lazy.nvim"
if not (vim.uv or vim.loop).fs_stat(lazypath) then
  local lazyrepo = "https://github.com/folke/lazy.nvim.git"
  local out = vim.fn.system({ "git", "clone", "--filter=blob:none", "--branch=stable", lazyrepo, lazypath })
  if vim.v.shell_error ~= 0 then
    vim.api.nvim_echo({
      { "Failed to clone lazy.nvim:\n", "ErrorMsg" },
      { out, "WarningMsg" },
      { "\nPress any key to exit..." },
    }, true, {})
    vim.fn.getchar()
    os.exit(1)
  end
end
vim.opt.rtp:prepend(lazypath)

-- Make sure to setup `mapleader` and `maplocalleader` before
-- loading lazy.nvim so that mappings are correct.
-- This is also a good place to setup other settings (vim.opt)
vim.g.mapleader = " "
vim.g.maplocalleader = "\\"

-- Setup lazy.nvim
require("lazy").setup({
  spec = {
    -- import your plugins
    { import = "plugins" },
  },
  -- Configure any other settings here. See the documentation for more details.
  -- colorscheme that will be used when installing plugins.
  install = { colorscheme = { "habamax" } },
  -- automatically check for plugin updates
  checker = { enabled = true },
})

./lua/config/colorscheme.lua
require'vague'.setup({
  transparent = true,
})

vim.cmd("colorscheme vague")

-- Make split seperators more visible with transparency
vim.api.nvim_set_hl(0, "WinSeparator", { fg = "#89b4fa", bg = "NONE" })
-- Also highlight inactive statuslines with the same color
vim.api.nvim_set_hl(0, "StatusLineNC", { fg = "#89b4fa", bg = "NONE" })

./lua/config/options.lua

vim.opt.expandtab = true
vim.opt.tabstop = 2
vim.opt.softtabstop = 2
vim.opt.shiftwidth = 2
vim.opt.autoindent = true
vim.opt.smartindent = true


vim.o.showmode = false

./lua/config/keymaps.lua
vim.g.mapleader = " "

vim.keymap.set("n", "-", "<CMD>Oil<CR>", { desc = "Open parent directory" })

-- move lines up and down more easily
vim.keymap.set("v", "J", ":m '>+1<CR>gv=gv", { desc = "Move selected lines down" })
vim.keymap.set("v", "K", ":m '<-2<CR>gv=gv", { desc = "Move selected lines up" })

-- Esc for ctrl+c
vim.keymap.set("i", "<C-c>", "<Esc>")

-- rebind quickfix (to free up q)
vim.keymap.set("n", "<leader>qn", ":cnext<CR>", { silent = true, desc = "Quick fix next item"})
vim.keymap.set("n", "<leader>qp", ":cprevious<CR>", { silent = true, desc = "Quick fix previous item"})
vim.keymap.set("n", "<leader>qd", ":cdo s/", { silent = false, desc = "Quick fix begin replace"})
vim.keymap.set("n", "<leader>qc", ":cclose<CR>", { silent = true, desc = "Quick fix close"})
vim.keymap.set("n", "<leader>qx", ":cdelete<CR>", { silent = true, desc = "Quick fix remove"})
vim.keymap.set("n", "<leader>qa", ":QFAdd<CR>", { silent = true, desc = "Quick fix add"})

-- window management
vim.keymap.set("n", "<leader>sv", ":vsplit<CR><C-w>l", { silent = true, desc = "Split vertically" })
vim.keymap.set("n", "<leader>sh", ":split<CR><C-w>j", { silent = true, desc = "Split horizontally" })

-- chmod
vim.keymap.set("n", "<leader>cx", ":!chmod +x %<CR>", { desc = "Make file executable" })

./lua/plugins/oil.lua
return {
  'stevearc/oil.nvim',
  ---@module 'oil'
  ---@type oil.SetupOpts
  opts = {},
  dependencies = { { "nvim-tree/nvim-web-devicons", opts = {} } },
  lazy = false,
  config = function()
    require("oil").setup({
      default_file_explorer = true,
      columns = {
        "icon",
        -- "permissions",
        -- "size",
        -- "mtime",
      },
      -- Buffer-local options to use for oil buffers
      buf_options = {
        buflisted = false,
        bufhidden = "hide",
      },
      -- Window-local options to use for oil buffers
      win_options = {
        wrap = false,
        signcolumn = "no",
        cursorcolumn = false,
        foldcolumn = "0",
        spell = false,
        list = false,
        conceallevel = 3,
        concealcursor = "nvic",
      },
      delete_to_trash = false,
      skip_confirm_for_simple_edits = true,
      prompt_save_on_select_new_entry = true,
      cleanup_delay_ms = 2000,
      lsp_file_methods = {
        -- Enable or disable LSP file operations
        enabled = true,
        -- Time to wait for LSP file operations to complete before skipping
        timeout_ms = 1000,
        -- Set to true to autosave buffers that are updated with LSP willRenameFiles
        -- Set to "unmodified" to only save unmodified buffers
        autosave_changes = false,
      },
      -- Constrain the cursor to the editable parts of the oil buffer
      -- Set to `false` to disable, or "name" to keep it on the file names
      constrain_cursor = "editable",
      -- Set to true to watch the filesystem for changes and reload oil
      watch_for_changes = false,
      -- Keymaps in oil buffer. Can be any value that `vim.keymap.set` accepts OR a table of keymap
      -- options with a `callback` (e.g. { callback = function() ... end, desc = "", mode = "n" })
      -- Additionally, if it is a string that matches "actions.<name>",
      -- it will use the mapping at require("oil.actions").<name>
      -- Set to `false` to remove a keymap
      -- See :help oil-actions for a list of all available actions
      keymaps = {
        ["g?"] = { "actions.show_help", mode = "n" },
        ["<CR>"] = "actions.select",
        ["<C-s>"] = { "actions.select", opts = { vertical = true } },
        ["<C-h>"] = { "actions.select", opts = { horizontal = true } },
        ["<C-t>"] = { "actions.select", opts = { tab = true } },
        ["<C-p>"] = "actions.preview",
        ["<C-c>"] = { "actions.close", mode = "n" },
        ["<C-l>"] = "actions.refresh",
        ["-"] = { "actions.parent", mode = "n" },
        ["_"] = { "actions.open_cwd", mode = "n" },
        ["`"] = { "actions.cd", mode = "n" },
        ["g~"] = { "actions.cd", opts = { scope = "tab" }, mode = "n" },
        ["gs"] = { "actions.change_sort", mode = "n" },
        ["gx"] = "actions.open_external",
        ["g."] = { "actions.toggle_hidden", mode = "n" },
        ["g\\"] = { "actions.toggle_trash", mode = "n" },
      },
      -- Set to false to disable all of the above keymaps
      use_default_keymaps = true,
      view_options = {
        -- Show files and directories that start with "."
        show_hidden = true,
        -- This function defines what is considered a "hidden" file
        is_hidden_file = function(name, bufnr)
          local m = name:match("^%.")
          return m ~= nil
        end,
        -- This function defines what will never be shown, even when `show_hidden` is set
        is_always_hidden = function(name, bufnr)
          return false
        end,
        -- Sort file names with numbers in a more intuitive order for humans.
        -- Can be "fast", true, or false. "fast" will turn it off for large directories.
        natural_order = "fast",
        -- Sort file and directory names case insensitive
        case_insensitive = false,
        sort = {
          -- sort order can be "asc" or "desc"
          -- see :help oil-columns to see which columns are sortable
          { "type", "asc" },
          { "name", "asc" },
        },
        -- Customize the highlight group for the file name
        highlight_filename = function(entry, is_hidden, is_link_target, is_link_orphan)
          return nil
        end,
      },
      -- Extra arguments to pass to SCP when moving/copying files over SSH
      extra_scp_args = {},
      -- Extra arguments to pass to aws s3 when creating/deleting/moving/copying files using aws s3
      extra_s3_args = {},
      -- EXPERIMENTAL support for performing file operations with git
      git = {
        -- Return true to automatically git add/mv/rm files
        add = function(path)
          return true
        end,
        mv = function(src_path, dest_path)
          return true
        end,
        rm = function(path)
          return false
        end,
      },
      -- Configuration for the floating window in oil.open_float
      float = {
        -- Padding around the floating window
        padding = 2,
        -- max_width and max_height can be integers or a float between 0 and 1 (e.g. 0.4 for 40%)
        max_width = 0,
        max_height = 0,
        border = nil,
        win_options = {
          winblend = 0,
        },
        -- optionally override the oil buffers window title with custom function: fun(winid: integer): string
        get_win_title = nil,
        -- preview_split: Split direction: "auto", "left", "right", "above", "below".
        preview_split = "auto",
        -- This is the config that will be passed to nvim_open_win.
        -- Change values here to customize the layout
        override = function(conf)
          return conf
        end,
      },
      -- Configuration for the file preview window
      preview_win = {
        -- Whether the preview window is automatically updated when the cursor is moved
        update_on_cursor_moved = true,
        -- How to open the preview window "load"|"scratch"|"fast_scratch"
        preview_method = "fast_scratch",
        -- A function that returns true to disable preview on a file e.g. to avoid lag
        disable_preview = function(filename)
          return false
        end,
        -- Window-local options to use for preview window buffers
        win_options = {},
      },
      -- Configuration for the floating action confirmation window
      confirmation = {
        -- Width dimensions can be integers or a float between 0 and 1 (e.g. 0.4 for 40%)
        -- min_width and max_width can be a single value or a list of mixed integer/float types.
        -- max_width = {100, 0.8} means "the lesser of 100 columns or 80% of total"
        max_width = 0.9,
        -- min_width = {40, 0.4} means "the greater of 40 columns or 40% of total"
        min_width = { 40, 0.4 },
        -- optionally define an integer/float for the exact width of the preview window
        width = nil,
        -- Height dimensions can be integers or a float between 0 and 1 (e.g. 0.4 for 40%)
        -- min_height and max_height can be a single value or a list of mixed integer/float types.
        -- max_height = {80, 0.9} means "the lesser of 80 columns or 90% of total"
        max_height = 0.9,
        -- min_height = {5, 0.1} means "the greater of 5 columns or 10% of total"
        min_height = { 5, 0.1 },
        -- optionally define an integer/float for the exact height of the preview window
        height = nil,
        border = nil,
        win_options = {
          winblend = 0,
        },
      },
      -- Configuration for the floating progress window
      progress = {
        max_width = 0.9,
        min_width = { 40, 0.4 },
        width = nil,
        max_height = { 10, 0.9 },
        min_height = { 5, 0.1 },
        height = nil,
        border = nil,
        minimized_border = "none",
        win_options = {
          winblend = 0,
        },
      },
      -- Configuration for the floating SSH window
      ssh = {
        border = nil,
      },
      -- Configuration for the floating keymaps help window
      keymaps_help = {
        border = nil,
      },
    })
	end,
}

./lua/plugins/colorscheme.lua
return {
  {
    "vague-theme/vague.nvim",
    lazy = false,
    priority = 1000,
  }
}

./lua/plugins/treesitter.lua
return {
  'nvim-treesitter/nvim-treesitter',
  lazy = false,
  build = ':TSUpdate',
  config = function()
    require'nvim-treesitter'.setup{
      install_dir = vim.fn.stdpath('data') .. '/site'
    }

    local parsers = {
      'javascript',
      'cpp',
      'c',
      'python',
      'lua'
    }
    require'nvim-treesitter'.install(parsers) 

    vim.api.nvim_create_autocmd('FileType', {
      pattern = { '<filetype>' },
      callback = function() 
        vim.treesitter.start() 
        vim.wo[0][0].foldexpr = 'v:lua.vim.treesitter.foldexpr()'
        vim.wo[0][0].foldmethod = 'expr'
        -- experimental indentation
        vim.bo.indentexpr = "v:lua.require'nvim-treesitter'.indentexpr()"
      end,
    })
  end,
}

./lua/plugins/init.lua
return {
  -- automatically add pairs of brackets, braces, tags and parenthesis
	{
		'windwp/nvim-autopairs',
		event = "InsertEnter",
		config = true
	},

  -- add nice icons to nvim
	{
		'nvim-tree/nvim-web-devicons',
		opts = {},
		config = function()
			require'nvim-web-devicons'.setup {
			 -- your personal icons can go here (to override)
			 -- you can specify color or cterm_color instead of specifying both of them
			 -- DevIcon will be appended to `name`
			 override = {
			  zsh = {
			    icon = "",
			    color = "#428850",
			    cterm_color = "65",
			    name = "Zsh"
			  }
			 };
			 -- globally enable different highlight colors per icon (default to true)
			 -- if set to false all icons will have the default icon's color
			 color_icons = true;
			 -- globally enable default icons (default to false)
			 -- will get overriden by `get_icons` option
			 default = true;
			 -- globally enable "strict" selection of icons - icon will be looked up in
			 -- different tables, first by filename, and if not found by extension; this
			 -- prevents cases when file doesn't have any extension but still gets some icon
			 -- because its name happened to match some extension (default to false)
			 strict = true;
			 -- set the light or dark variant manually, instead of relying on `background`
			 -- (default to nil)
			 variant = "light|dark";
			 -- override blend value for all highlight groups :h highlight-blend.
			 -- setting this value to `0` will make all icons opaque. in practice this means
			 -- that icons width will not be affected by pumblend option (see issue #608)
			 -- (default to nil)
			 blend = 0;
			 -- same as `override` but specifically for overrides by filename
			 -- takes effect when `strict` is true
			 override_by_filename = {
			  [".gitignore"] = {
			    icon = "",
			    color = "#f1502f",
			    name = "Gitignore"
			  }
			 };
			 -- same as `override` but specifically for overrides by extension
			 -- takes effect when `strict` is true
			 override_by_extension = {
			  ["log"] = {
			    icon = "",
			    color = "#81e043",
			    name = "Log"
			  }
			 };
			 -- same as `override` but specifically for operating system
			 -- takes effect when `strict` is true
			 override_by_operating_system = {
			  ["apple"] = {
			    icon = "",
			    color = "#A2AAAD",
			    cterm_color = "248",
			    name = "Apple",
			  },
			 };
			}
		end,
	},

  -- surround functionality
  {
    'kylechui/nvim-surround',
    version = "^3.0.0", -- used for stability
    event = "VeryLazy",
    config = function()
      require'nvim-surround'.setup({})
    end,
  }
}

./lua/plugins/lualine.lua
return {
  'nvim-lualine/lualine.nvim',
  dependencies = { 'nvim-tree/nvim-web-devicons' },
  config = function()
    require'lualine'.setup {
      options = {
        icons_enabled = true,
        theme = 'auto',
        component_separators = { left = ' ', right = ' ' },
        section_separators = { left = '', right = '' },
        disabled_filetypes = {
          statusline = {},
          winbar = {},
        },
        ignore_focus = {},
        always_divide_middle = true,
        globalstatus = true,
        refresh = {
          statusline = 1000,
          tabline = 1000,
          winbar = 1000,
          refresh_time = 16,
          events = {
            'WinEnter',
            'BufEnter',
            'BufWritePost',
            'SessionLoadPost',
            'FileChangedShellPost',
            'VimResized',
            'Filetype',
            'CursorMoved',
            'CursorMovedI',
            'ModeChanged',
          },
        },
      },
      sections = {
        lualine_a = {'mode'},
        lualine_b = {'branch', 'diff', 'diagnostics'},
        lualine_c = {'filename'},
        lualine_x = {'encoding', 'filetype' },
      },
      inactive_sections = {
        lualine_a = {},
        lualine_b = {},
        lualine_c = {'filename'},
        lualine_x = {'location'},
        lualine_y = {},
        lualine_z = {},
      },
      tabline = {},
      -- winbar = {
      --   lualine_c = {'filename'}
      -- },
      extensions = {}
    } 
  end,
}

./init.lua
require("config.options")
require("config.lazy")
require("config.colorscheme")
require("config.keymaps")

require("oil").setup()

